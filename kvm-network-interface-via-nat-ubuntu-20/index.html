<!DOCTYPE html>
<html lang="en">
    <head>
<title>kvm-network-interface-via-nat-ubuntu-20</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="I have started using VMs more and more in my development workflow and it&#x27;s
impossible to work in a VM without an internet connection for me most of the
tim" />
 <link href="/favicon.ico" rel="icon" type="image/png" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/post.css" />
<link rel="stylesheet" href="/app.css" />
<link rel="stylesheet" href="/patterns.css" />
<link rel="stylesheet" href="/title-override.css" />
<script src="/theme.js"></script>
<script src="/image-modal.js"></script>

<!-- Open Graph and Twitter Card meta tags -->
<!-- Regular post meta tags -->
<meta property="og:title" content="kvm-network-interface-via-nat-ubuntu-20 | Nic Payne" />
<meta property="og:image" content="https://cdn.statically.io/gh/pypeaday/pype.dev/main/pages/media/og-02.png" />
<meta property="og:url" content="https://pype.dev/kvm-network-interface-via-nat-ubuntu-20" />
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="kvm-network-interface-via-nat-ubuntu-20 | Nic Payne" />
<meta name="twitter:description" content="I have started using VMs more and more in my development workflow and it&#x27;s
impossible to work in a VM without an internet connection for me most of the
tim" />
<meta name="twitter:image" content="https://cdn.statically.io/gh/pypeaday/pype.dev/main/pages/media/og-02.png" />
<!-- Common Twitter meta tags -->
<meta name="twitter:creator" content="@pypeaday">
<meta name="twitter:site" content="@pypeaday">


        <meta property="og:author_email" content="nic@pype.dev" />

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const collapsibleElements = document.querySelectorAll('.is-collapsible');
                collapsibleElements.forEach(el => {
                    const summary = el.querySelector('.admonition-title');
                    if (summary) {
                        summary.style.cursor = 'pointer';
                        summary.addEventListener('click', () => {
                            el.classList.toggle('collapsible-open');
                        });
                    }
                });
            });
        </script>

        <style>

            .admonition.source {
                padding-bottom: 0;
            }
            .admonition.source pre.wrapper {
                margin: 0;
                padding: 0;
            }
            .is-collapsible {
                overflow: hidden;
                transition: max-height 0.3s ease;
            }
            .is-collapsible:not(.collapsible-open) {
                max-height: 0;
                padding-bottom: 2.5rem;
            }
            .admonition-title {
                font-weight: bold;
                margin-bottom: 8px;
            }
        </style>
    </head>
    <body class="font-sans">
<div class='flex flex-row w-full min-h-screen bg-pattern-gradient text-text-main'>
    <main class="flex-grow fade-in overflow-visible">
        <div class='container flex-grow p-2 sm:p-6 mx-auto bg-content-blend overflow-visible'>
<header class='py-4'>

    <nav class='flex flex-wrap justify-center sm:justify-start items-center'>
        <a class="nav-link accent-glow"
            href='/'>Home</a>
        <a class="nav-link accent-glow"
            href='https://github.com/pypeaday/pype.dev'>GitHub</a>
        <a class="nav-link accent-glow"
            href='https://mydigitalharbor.com/pypeaday'>DigitalHarbor</a>
        <a class="nav-link accent-glow"
            href='/slash'>Start Here</a>
        <a class="nav-link accent-glow"
            href='/my-thoughts'>My Thoughts</a>
    </nav>

    <!-- <div>
        <label id="theme-switch" class="theme-switch" for="checkbox-theme" title="light/dark mode toggle">
            <input type="checkbox" id="checkbox-theme" />
            <div class="slider round"></div>
        </label>
    </div> -->
</header><div id='didyoumean'>
    <div class="mb-0">
        <!-- <label for="search" class="block text-sm font-medium mb-2">Search for a page</label> -->
        <input type="text" id="search"
               class="w-full p-2 border rounded-md bg-gray-50 dark:bg-gray-800 focus:ring-2 focus:ring-pink-500"
               placeholder="'/' Search for a page">
    </div>

    <!-- <div id="didyoumean_results" class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"> -->
    <ul id="didyoumean_results" class='grid gap-4'>
        <!-- Results will be populated here -->
    </ul>
</div>
<script type='module'>
// All available pages from Markata
    // const pages =  markata.map("{'slug':slug,'title':title,'description':description,'tags':tags}", filter=config.didyoumean_filter, sort='True')|tojson;
    // fetch pages from config.output_dir / didyoumean.json

    const pages = await fetch('/didyoumean.json').then(response => response.json());
    const populate_search_input = false
    const search_hotkey = "/"

// Get current path from URL, removing leading/trailing slashes
    if (populate_search_input) {
        const currentPath = window.location.pathname.replace(/^\/|\/$/g, '');
        document.getElementById('search').value = currentPath;
    }

// Search across all fields in an object
    function searchObject(needle, obj) {
        needle = needle.toLowerCase();
        let score = 0;

    // Helper to search a single field
        const searchField = (value) => {
            if (!value) return 0;
            value = String(value).toLowerCase();

            // Exact matches
            if (value === needle) return 15;

            // Word boundary matches (complete words)
            if (value.match(new RegExp(`\\b${needle}\\b`))) return 10;

            // Contains full search term
            if (value.includes(needle)) return 8;

            // Most parts match (for multi-word searches)
            const needleParts = needle.split(/\W+/).filter(p => p.length > 2);
            const valueParts = value.split(/\W+/).filter(p => p.length > 2);

            if (needleParts.length === 0) return 0;

            let matchCount = 0;
            for (const part of needleParts) {
                for (const valuePart of valueParts) {
                    if (valuePart.includes(part) || part.includes(valuePart)) {
                        matchCount++;
                        break;
                    }
                }
            }

            // Only count if most parts match
            const matchRatio = matchCount / needleParts.length;
            if (matchRatio >= 0.75) {
                return matchRatio * 6;
            }

            return 0;
        };

    // Search each field with different weights
        const slugScore = searchField(obj.slug) * 3;  // Slug is most important
        const titleScore = searchField(obj.title) * 2;  // Title is next
        const descScore = searchField(obj.description) * 1;  // Description
        const tagScore = (obj.tags || []).reduce((sum, tag) => sum + searchField(tag), 0);  // Tags

        score = slugScore + titleScore + descScore + tagScore;

    // Path segment matches for slug (only if we have some other match)
        if (score > 0 && obj.slug) {
            const inputParts = needle.split('/').filter(p => p.length > 0);
            const slugParts = obj.slug.toLowerCase().split('/');

            // Bonus for matching path structure
            for (let i = 0; i < inputParts.length && i < slugParts.length; i++) {
                if (slugParts[i].includes(inputParts[i])) {
                    score += 5;  // Matching segments in order is valuable
                }
            }
        }

        return score;
    }

// Find similar pages
    function findSimilar(input) {
        if (!input || input.length < 2) return [];
        const normalizedInput = input.toLowerCase().trim();

    // Score each page
        const scored = pages.map(page => ({
            ...page,
            score: searchObject(normalizedInput, page)
        }));

    // Sort by score (higher is better) and take top matches
        return scored
            .sort((a, b) => b.score - a.score)
            .slice(0, 12)  // Show more results in the grid
            .filter(item => item.score > 15); // Only show strong matches
    }

// Update results in the DOM
    function updateResults(results) {
        const resultsDiv = document.getElementById('didyoumean_results');

        if (results.length === 0) {
            resultsDiv.innerHTML = '<p class="text-gray-500 col-span-full text-center py-8">No similar pages found.</p>';
            return;
        }

        const html = results.map(page => `
        <li class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:shadow-lg transition-shadow first:mt-4">
            <a href="/${page.slug}" class="block">
                <h3 class="text-lg font-semibold text-pink-500 hover:text-pink-600 dark:text-pink-400 dark:hover:text-pink-300 mb-2">
                    ${page.title || page.slug}
                </h3>
                ${page.description ? `
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-3 line-clamp-2">
            ${page.description}
            </p>
            ` : ''}
                <div class="flex flex-wrap gap-2 text-xs text-gray-500 dark:text-gray-400">
                </div>
                ${page.tags && page.tags.length > 0 ? `
            <div class="mt-3 flex flex-wrap gap-2">
            ${page.tags.map(tag => `
                            <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs">
                                ${tag}
                            </span>
                        `).join('')}
            </div>
            ` : ''}
            </a>
        </li>
    `).join('');

        resultsDiv.innerHTML = html;
    }

// Set up hotkey for search if configured
    if (search_hotkey) {
        document.addEventListener('keydown', (e) => {
            // Don't trigger if user is typing in an input or textarea
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return;
            }

            // Check if the pressed key matches the hotkey
            if (e.key === search_hotkey) {
                e.preventDefault();  // Prevent the '/' from being typed
                const searchInput = document.getElementById('search');
                searchInput.focus();
                searchInput.select();  // Select any existing text
            }
        });
    }

// Set up search input handler with debounce
    let debounceTimeout;
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', (e) => {
        clearTimeout(debounceTimeout);
        debounceTimeout = setTimeout(() => {
            const results = findSimilar(e.target.value);
            updateResults(results);
        }, 100);
    });

// Initial search with current path
    if (populate_search_input) {
        updateResults(findSimilar(currentPath));
    }
</script><style>
    /* Ultra-aggressive title styling override */
    #title, h1#title, .post-header h1, h1.gradient-text {
        font-size: 3.75rem !important; /* ~text-7xl */
        font-weight: 800 !important;
        line-height: 1.1 !important;
        letter-spacing: -0.025em !important;
    }
    
    @media (min-width: 768px) {
        #title, h1#title, .post-header h1, h1.gradient-text {
            font-size: 4.5rem !important; /* Even larger than text-7xl */
        }
    }
    
    /* Mobile-first responsive typography for article content */
    .article-content.prose {
        font-size: 1.125rem !important; /* 18px - larger than default 16px */
        line-height: 1.7 !important;
    }
    
    .article-content.prose p {
        font-size: 1.125rem !important; /* 18px */
        line-height: 1.7 !important;
    }
    
    /* Tablet and up */
    @media (min-width: 768px) {
        .article-content.prose {
            font-size: 1.25rem !important; /* 20px */
            line-height: 1.8 !important;
        }
        
        .article-content.prose p {
            font-size: 1.25rem !important; /* 20px */
            line-height: 1.8 !important;
        }
    }
    
    /* Desktop */
    @media (min-width: 1024px) {
        .article-content.prose {
            font-size: 1.375rem !important; /* 22px */
            line-height: 1.8 !important;
        }
        
        .article-content.prose p {
            font-size: 1.375rem !important; /* 22px */
            line-height: 1.8 !important;
        }
    }
    
    /* Floating cover image above article */
    .cover-floating-container {
        position: relative;
        width: 100%;
        margin: 2.5rem auto 0; /* Space from search bar */
        z-index: 20;
    }
    
    /* True boundary-breaking cover image */
    .boundary-break-container {
        position: relative;
        width: calc(100% + 3rem); /* Extend 1.5rem on each side beyond article */
        left: -1.5rem; /* Pull left edge 1.5rem beyond container */
        height: 380px; /* Reduced from 450px for smaller image */
        overflow: visible;
        z-index: 20;
    }
    
    /* Glow effect that extends beyond image */
    .boundary-break-glow {
        position: absolute;
        top: -2rem;
        left: -2rem;
        right: -2rem;
        bottom: -1rem;
        background: linear-gradient(45deg, 
            rgba(211, 124, 95, 0.7),  /* accent-warm */
            rgba(96, 138, 159, 0.7),  /* accent-cool */
            rgba(106, 138, 130, 0.7)  /* accent-green */
        );
        filter: blur(2.5rem);
        border-radius: 1rem;
        opacity: 0.8;
        z-index: 10;
        animation: boundary-break-pulse 4s infinite alternate;
    }
    
    @keyframes boundary-break-pulse {
        0% { opacity: 0.7; filter: blur(2rem); }
        100% { opacity: 0.9; filter: blur(3rem); }
    }
    
    /* Image styling */
    .boundary-break-image {
        position: relative;
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0.75rem;
        border: 0.5rem solid white;
        box-shadow: 0 2rem 4rem -1rem rgba(0,0,0,0.8), 0 0 2.5rem 0.25rem rgba(0,0,0,0.5);
        transform: scale(1.05);
        transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1),
                    box-shadow 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        z-index: 20;
    }
    
    /* Hover effect */
    .boundary-break-image:hover {
        transform: scale(1.08) translateY(-0.5rem);
        box-shadow: 0 2.5rem 4.5rem -1rem rgba(0,0,0,0.85), 0 0 3rem 0.25rem rgba(0,0,0,0.6);
    }
    
    /* Article container styling */
    .post-container {
        margin-top: -3.5rem; /* Reduced overlap for breathing room */
        padding-top: 5rem; /* Adjusted padding to maintain proper spacing */
        position: relative;
        z-index: 10;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .boundary-break-container {
            width: calc(100% + 2rem);
            left: -1rem;
            height: auto; /* Auto height to prevent cropping */
            max-height: 350px; /* Maximum height constraint */
        }
        
        .boundary-break-glow {
            top: -1.5rem;
            left: -1.5rem;
            right: -1.5rem;
            bottom: -0.75rem;
        }
        
        .boundary-break-image {
            height: auto; /* Let height be determined by aspect ratio */
            max-height: 350px;
            object-fit: contain; /* Show entire image without cropping */
            transform: scale(1.02); /* Slightly reduced scale for mobile */
        }
        
        .post-container {
            margin-top: -5rem;
            padding-top: 6rem;
        }
    }
    
    /* Small mobile devices */
    @media (max-width: 480px) {
        .boundary-break-container {
            height: auto;
            max-height: 280px;
        }
        
        .boundary-break-image {
            max-height: 280px;
            border-width: 0.25rem;
        }
    }
</style>


<article class='w-full pattern-card glow-card p-4 md:p-6 post-container'>
<section class="post-header mb-8">
    <h1 id="title" style="font-size: 4rem; line-height: 1.1; font-weight: 800;" class="text-6xl md:text-7xl font-extrabold gradient-text mb-4 post-title-large">kvm-network-interface-via-nat-ubuntu-20</h1>
    <div class="flex items-center text-sm text-text-main/80 mb-6">
        <time datetime="2022-06-25">
            June 25, 2022
        </time>
    </div>
    <div class="flex flex-wrap gap-2">
            <a href="https://pype.dev//tags/homelab/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #homelab
            </a>
            <a href="https://pype.dev//tags/linux/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #linux
            </a>
            <a href="https://pype.dev//tags/tech/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #tech
            </a>
    </div>
</section>    <section class="article-content prose dark:prose-invert mx-auto mt-8">
        <p>I have started using VMs more and more in my development workflow and it's
impossible to work in a VM without an internet connection for me most of the
time. Setting up the KVM networking is kind of confusing to me and I've done it
two different ways. Here is how I set it up on my home desktop using NAT.</p>
<h1 id="credit">Credit <a class="header-anchor" href="#credit"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h1>
<p>First thing's first: <a href="https://computingforgeeks.com/managing-kvm-network-interfaces-in-linux/">credit to this post</a></p>
<h1 id="commands">Commands <a class="header-anchor" href="#commands"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h1>
<p>There was a <code>default</code> network already made by virt-manager but my VM couldn't connect over it at all...</p>
<p>These commands got me up and running without even turning the VM off</p>
<blockquote>
<p>I went full on <code>sudo -i</code> for this just to make it easier - be careful</p>
</blockquote>
<h2 id="dump-an-existint-network-config">Dump an existint network config <a class="header-anchor" href="#dump-an-existint-network-config"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<pre class='wrapper'>

<div class='copy-wrapper'>

<button class='copy' title='copy code to clipboard' onclick="navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 115.77 122.88" style="enable-background:new 0 0 115.77 122.88" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02 v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02 c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1 c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7 h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65 v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02 v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z"/></g></svg></button>
</div>
        
<div class="highlight"><pre><span></span><span class="c1"># as root</span>

virsh<span class="w"> </span>net-dumpxml<span class="w"> </span>default<span class="w"> </span>&gt;<span class="w"> </span>br1.xml

vim<span class="w"> </span>br1.xml
</pre></div>

</pre>

<h2 id="edit-it">Edit it <a class="header-anchor" href="#edit-it"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<p>I was unsure what the ip range should be so I just stuck with the original blog.
The <code>default</code> network had the CIDR block defined as <code>192.168.122.0/24</code> which is different from my home network so I guess it's fine?</p>
<pre class='wrapper'>

<div class='copy-wrapper'>

<button class='copy' title='copy code to clipboard' onclick="navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 115.77 122.88" style="enable-background:new 0 0 115.77 122.88" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02 v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02 c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1 c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7 h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65 v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02 v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z"/></g></svg></button>
</div>
        
<div class="highlight"><pre><span></span><span class="nt">&lt;network&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>br1<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;forward</span><span class="w"> </span><span class="na">mode=</span><span class="s">&#39;nat&#39;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;nat&gt;</span>
<span class="w">      </span><span class="nt">&lt;port</span><span class="w"> </span><span class="na">start=</span><span class="s">&#39;1024&#39;</span><span class="w"> </span><span class="na">end=</span><span class="s">&#39;65535&#39;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/nat&gt;</span>
<span class="w">  </span><span class="nt">&lt;/forward&gt;</span>
<span class="w">  </span><span class="nt">&lt;bridge</span><span class="w"> </span><span class="na">name=</span><span class="s">&#39;br1&#39;</span><span class="w"> </span><span class="na">stp=</span><span class="s">&#39;on&#39;</span><span class="w"> </span><span class="na">delay=</span><span class="s">&#39;0&#39;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;ip</span><span class="w"> </span><span class="na">address=</span><span class="s">&#39;192.168.10.1&#39;</span><span class="w"> </span><span class="na">netmask=</span><span class="s">&#39;255.255.255.0&#39;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;dhcp&gt;</span>
<span class="w">      </span><span class="nt">&lt;range</span><span class="w"> </span><span class="na">start=</span><span class="s">&#39;192.168.10.10&#39;</span><span class="w"> </span><span class="na">end=</span><span class="s">&#39;192.168.10.100&#39;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dhcp&gt;</span>
<span class="w">  </span><span class="nt">&lt;/ip&gt;</span>
<span class="nt">&lt;/network&gt;</span>
</pre></div>

</pre>

<h2 id="define-a-network">Define a network <a class="header-anchor" href="#define-a-network"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<pre class='wrapper'>

<div class='copy-wrapper'>

<button class='copy' title='copy code to clipboard' onclick="navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 115.77 122.88" style="enable-background:new 0 0 115.77 122.88" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02 v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02 c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1 c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7 h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65 v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02 v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z"/></g></svg></button>
</div>
        
<div class="highlight"><pre><span></span>virsh<span class="w"> </span>net-define<span class="w"> </span>br1.xml
virsh<span class="w"> </span>net-autostart<span class="w"> </span>br1
</pre></div>

</pre>

<p>Then to check...</p>
<pre class='wrapper'>

<div class='copy-wrapper'>

<button class='copy' title='copy code to clipboard' onclick="navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 115.77 122.88" style="enable-background:new 0 0 115.77 122.88" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02 v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02 c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1 c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7 h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65 v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02 v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z"/></g></svg></button>
</div>
        
<div class="highlight"><pre><span></span>virsh<span class="w"> </span>net-list<span class="w"> </span>--all

<span class="w"> </span>Name<span class="w">      </span>State<span class="w">    </span>Autostart<span class="w">   </span>Persistent
--------------------------------------------
<span class="w"> </span>br1<span class="w">       </span>active<span class="w">   </span>yes<span class="w">         </span>yes
<span class="w"> </span>default<span class="w">   </span>active<span class="w">   </span>yes<span class="w">         </span>yes
</pre></div>

</pre>

<h2 id="uuid">UUID <a class="header-anchor" href="#uuid"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<p><code>virsh net-uuid br1</code></p>
<h2 id="magic">Magic <a class="header-anchor" href="#magic"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<p><code>virsh attach-interface --domain &lt;NAME OF VM&gt; --type bridge --source br1 --model virtio --config --live</code></p>
<p>My VM, <code>ubuntu20.04</code> was running and immediately connected to the newly attached device!</p>
<h1 id="credit-again">Credit again <a class="header-anchor" href="#credit-again"><svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h1>
<p>Visit the original post for more details - this serves more as as a quicker set of notes for future me</p>

    </section>
</article>        </div>
    </main>

</div>
     </body>
</html>