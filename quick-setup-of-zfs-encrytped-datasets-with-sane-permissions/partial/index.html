<section class="post-terminal  post-terminal--til ">

    <article class="post-terminal__article">
<section class="post-header mb-8">
    <h1 id="title" style="font-size: 4rem; line-height: 1.1; font-weight: 800;" class="text-6xl md:text-7xl font-extrabold gradient-text mb-4 post-title-large">Quick setup of ZFS encrytped datasets with sane permissions</h1>
    <div class="flex items-center text-sm text-text-main/80 mb-6">
        <time datetime="2022-10-06">
            October 06, 2022
        </time>
    </div>
    <div class="flex flex-wrap gap-2">
            <a href="https://pype.dev//tags/zfs/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #zfs
            </a>
            <a href="https://pype.dev//tags/homelab/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #homelab
            </a>
            <a href="https://pype.dev//tags/tech/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #tech
            </a>
            <a href="https://pype.dev//tags/til/" class="inline-block bg-primary-light text-accent-cool text-xs font-medium px-3 py-1 rounded-full hover:bg-primary-light/80 transition-colors border border-accent-cool/20 hover-lift">
                #til
            </a>
    </div>
</section>        <section class="post-terminal__body prose dark:prose-invert">
            <p>Assuming you have a pool called <code>tank</code>...</p>
<p>And assuming you have an encrypted dataset (See <a href="https://arstechnica.com/gadgets/2021/06/a-quick-start-guide-to-openzfs-native-encryption/">Jim Saltar's short
intro</a>)</p>
<ol>
<li>Create a group for permissions - in my case I have one called <code>home</code></li>
<li>Then if there's anything in <code>/tank/encrypted</code> his it with <code>chgrp -R home /tank/encrypted</code> to give the <code>home</code> group ownership</li>
<li>Next we need to make sure that the members of <code>home</code> can do the writing...
so <code>chmod 775 -R /tank/encrypted</code> will do the trick</li>
<li>Finally we want to make sure that all data created inside our dataset has
the same set of permissions with <code>chmod g+s /tank/encrypted</code> and <code>chmod g+w /tank/encrypted</code></li>
</ol>

        </section>
    </article>
</section>