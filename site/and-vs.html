<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="./static/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />
    <meta name="generator" content="Marmite" />
    
<meta property="og:title" content="And-vs-&">

<meta property="og:description" content="
I often struggle to remember the correct way to do and type comparisons when working in pandas.
I r...">


<meta property="og:url" content="https://pype.dev/and-vs.html">

<meta property="og:type" content="article">
<meta property="og:site_name" content="Pype.dev">

<meta property="article:published_time" content=" 2022-04-06T00:00:00+00:00">


<meta property="article:author" content="https://pype.dev/author-nicpayne.html">


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://pype.dev/and-vs.html"
    },
    "url": "https://pype.dev/and-vs.html",
    "headline": "And-vs-&",
    "description": "I often struggle to remember the correct way to do and type comparisons when working in pandas.
I remember learning long long ago that and a...",
    
    "author": {
        "@type": "Person",
        "name": "Nicholas Payne",
        "url": "https://pype.dev/author-nicpayne.html",
    },
    "publisher": {
        "@type": "Organization",
        "name": "Pype.dev",
        "logo": {
            "@type": "ImageObject",
            "url": "https://pype.dev/"
        }
    },
    "datePublished": "2022-04-06T00:00:00+00:00"
}
</script>


    <title>And-vs-& | Pype.dev</title>
    <link rel="stylesheet" type="text/css" href="./static/pico.min.css">
    <link rel="stylesheet" type="text/css" href="./static/marmite.css">
    
    <link rel="stylesheet" type="text/css" href="./static/colorschemes/nord.css">
    
    <link rel="stylesheet" type="text/css" href="./static/custom.css">
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/github.min.css" id="highlightjs-theme" />



    <link rel="alternate" type="application/rss+xml" title="index" href="index.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: tech" href="tag-tech.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: homelab" href="tag-homelab.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: linux" href="tag-linux.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: bema" href="tag-bema.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: python" href="tag-python.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: cli" href="tag-cli.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: faith" href="tag-faith.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: bible-project" href="tag-bible-project.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: vim" href="tag-vim.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: zfs" href="tag-zfs.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: bash" href="tag-bash.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: til" href="tag-til.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: git" href="tag-git.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: blog" href="tag-blog.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: data" href="tag-data.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: webdev" href="tag-webdev.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: terminal" href="tag-terminal.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: homepage" href="tag-homepage.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: infrastructure" href="tag-infrastructure.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: books" href="tag-books.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: olivet" href="tag-olivet.rss">
    <link rel="alternate" type="application/rss+xml" title="author: nicpayne" href="author-nicpayne.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2024" href="archive-2024.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2023" href="archive-2023.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2022" href="archive-2022.rss">
    

    
    <link rel="alternate" type="application/feed+json" title="JSON index" href="index.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: tech" href="tag-tech.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: homelab" href="tag-homelab.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: linux" href="tag-linux.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: bema" href="tag-bema.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: python" href="tag-python.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: cli" href="tag-cli.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: faith" href="tag-faith.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: bible-project" href="tag-bible-project.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: vim" href="tag-vim.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: zfs" href="tag-zfs.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: bash" href="tag-bash.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: til" href="tag-til.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: git" href="tag-git.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: blog" href="tag-blog.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: data" href="tag-data.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: webdev" href="tag-webdev.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: terminal" href="tag-terminal.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: homepage" href="tag-homepage.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: infrastructure" href="tag-infrastructure.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: books" href="tag-books.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: olivet" href="tag-olivet.json">
    <link rel="alternate" type="application/feed+json" title="JSON author: nicpayne" href="author-nicpayne.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2024" href="archive-2024.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2023" href="archive-2023.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2022" href="archive-2022.json">
    
    
    
    
</head>
<body>
    
    <div class="container-fluid announcement-wrapper">
        <div class="announcement"><p>Give us a â˜† on <a href="https://github.com/rochacbruno/marmite">github</a></p>
</div>
    </div>
    
    <main class="container">
        
        <header class="header-content">
            <nav class="header-nav">
                <ul class="header-name">
                    <li>
                        <hgroup>
                            <h2><a href="./" class="contrast">Pype.dev</a></h2>
                             <p>my mental data-lake</p> 
                        </hgroup>
                    </li>
                </ul>
                <button id="menu-toggle" class="hamburger">&#9776;</button>
                
                <ul class="header-menu" id="header-menu">
                    
                      
                      
                    <li>
                        
                        <a class="menu-item secondary"  href="./archive.html">Archive</a>
                        
                    </li>
                    
                      
                      
                    <li>
                        
                        <a class="menu-item secondary"  href="./tags.html">Tags</a>
                        
                    </li>
                    
                      
                      
                    <li>
                        
                        <a class="menu-item secondary"  href="https://github.com/pypeaday/pype.dev" target="_blank" >Github</a>
                        
                    </li>
                    
                    <li><span class="theme-toggle secondary" title="dark mode">&#9789;</span></li>
                    
                    <li><a href="#" id="search-toggle" class="secondary" title="Search (Ctrl + Shift + F)"> <span class="search-txt">Search</span><span class="search-magnifier"></span></a></li>
                    
                    <div class="underline"></div>
                </ul>
            </nav>
            
            <div class="marmite-background-overlay" id="overlay-close"></div>
            <div class="marmite-search-bar hidden">
                <span>Search</span>
                <button class="marmite-close-button" id="search-close">X</button>
                <input placeholder="Search" id="marmite-search-input" />
                <div class="marmite-search-bar-result">
                    <ul id="marmite-search-bar-result"></ul>
                </div>
            </div>
            
        </header>
        
        <section class="main-content">
            



<article>

  


<div class="content-title" id="title">
    <h1>And-vs-&</h1> 
    


<span class="content-date">
    <small> Apr  6, 2022 - &#10710; 14 min</small>
</span>

</div>

  
  <div class="content-toc">
    <a href="#" id="toc"></a>
    <details>
    <summary>ğŸ—’ï¸</summary>
    <ul>
<ul>
<li><a href="#lists">Lists</a></li>
<li><a href="#numpy">Numpy</a></li>
<li><a href="#pandas">Pandas</a></li>
<li><a href="#the-original-point">The Original Point</a></li>
<li><a href="#end">End</a></li>
</ul>
</ul>

    </details>
  </div>
  

  <div class="content-html"><!-- Content Injected to every content markdown header -->
<p>I often struggle to remember the correct way to do <code>and</code> type comparisons when working in pandas.</p>
<p>I remember learning long long ago that <code>and</code> and <code>&amp;</code> are different, the former being lazy boolean evaluation whereas the latter is a bitwise operation.</p>
<p><u>I learned a lot from <a href="https://stackoverflow.com/questions/22646463/and-boolean-vs-bitwise-why-difference-in-behavior-with-lists-vs-nump">this SO post</a></u></p>
<h2><a href="#lists" aria-hidden="true" class="anchor" id="lists"></a>Lists</h2>
<p>Python <code>list</code> objects can contain unlike elements - ie. <code>[True, 'foo', 1, '1', [1,2,3]]</code> is a valid list with booleans, strings, integers, and another list.
Because of this, we can't use <code>&amp;</code> to compare two lists since they can't be combined in a consistent and meaningful way.</p>
<p>However we can use <code>and</code> since it doesn't do bitwise operations, it just evaluates the boolean value of the list (basically if it's non-empty then <code>bool(my_list)</code> evaluates to <code>True</code>)</p>
<p>Here's an example:</p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ my_list = [1, &quot;2&quot;, &quot;foo&quot;, [True], False]

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ bool(my_list)
True
</code></pre>
<p>If we compare <code>my_list</code> with <code>another_list</code> using <code>and</code> then the comparision will go:</p>
<pre><code>if bool(my_list):
    if bool(another_list):
       &lt;operation&gt; 
    else:
       break
</code></pre>
<p>Let's see another example:</p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ another_list = [False, False]

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ my_list and another_list
[False, False]
</code></pre>
<p><code>bool(my_list)</code> evaluated to <code>True</code>, and <code>bool(another_list)</code> <em>also</em> evaluated to <code>True</code> even though it's full of <code>False</code> values because the object is non-empty.</p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ if my_list and another_list:
...:     print(&quot;foo&quot;)
foo
</code></pre>
<p>So using <code>and</code> in this case results in a <code>True</code> conditional, so the <code>print</code> statement is executed.</p>
<p>Feels kind of counter-intuitive at first glance, to me anyways...</p>
<p>However, we can't use <code>&amp;</code> because there isn't a meaningful to do bitwise operations over these two lists:</p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ my_list &amp; another_list
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ &lt;ipython-input-19-a2a16cebb3da&gt;:1 in &lt;cell line: 1&gt;                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
TypeError: unsupported operand type(s) for &amp;: 'list' and 'list'

</code></pre>
<h2><a href="#numpy" aria-hidden="true" class="anchor" id="numpy"></a>Numpy</h2>
<p><code>numpy</code> arrays are special and they have a lot of fancy vectorization utilities built-in which make them great and fast for mathematical operations but now our logical comparisons need to be handled with a different kind of care.</p>
<p>First thing though - without some trickery they do not hold mixed data types like a <code>list</code> does (necessary, I think, for the vectorized optimization that numpy is built on top of)</p>
<p>With that out of the way here's the main thing for this post, we can't just evaluate the <code>bool</code> of an array - numpy says no no no.</p>
<pre><code class="language-python">
sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ arr = np.array([&quot;1&quot;, 2, True, False])

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ arr
array(['1', '2', 'True', 'False'], dtype='&lt;U21')

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ bool(arr)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ &lt;ipython-input-25-4e8c5dd85b93&gt;:1 in &lt;cell line: 1&gt;                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()

</code></pre>
<blockquote>
<p>This means that using <code>and</code> with <code>numpy</code> arrays doesn't really make sense because we probably care about the truth value of each element (bitwise), not the truth value of the array.</p>
</blockquote>
<p>Notice that when I print <code>arr</code> all the elements are a string - and the <code>dtype</code> is <code>&lt;U21</code> for all elements.</p>
<p>This is not how I instantiated the array so be aware of that behavior with numpy.</p>
<blockquote>
<p><code>&lt;U21</code> is a dtype expressing the values are 'Little Endian', Unicode, 12 characters. See <a href="https://numpy.org/doc/stable/reference/arrays.dtypes.html#specifying-and-constructing-data-types">here</a> for docs for docs</p>
</blockquote>
<p>So for logical comparisions we should look at the error message then...
Our handy error message says to try <code>any</code> or <code>all</code></p>
<p>Because the datatypes in this example are basically strings, using <code>arr.any()</code> will result in an error that I do not fully understand, but <code>any(arr)</code> and <code>all(arr)</code> work...</p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ if arr.any():
...:     print(&quot;foo&quot;)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ &lt;ipython-input-48-25ecac52db96&gt;:1 in &lt;cell line: 1&gt;                                              â”‚
â”‚ /home/u_paynen3/personal/sandbox/.venv/sandbox/lib/python3.8/site-packages/numpy/core/_methods.p â”‚
â”‚ y:57 in _any                                                                                     â”‚
â”‚                                                                                                  â”‚
â”‚    54 def _any(a, axis=None, dtype=None, out=None, keepdims=False, *, where=True):               â”‚
â”‚    55 â”‚   # Parsing keyword arguments is currently fairly slow, so avoid it for now              â”‚
â”‚    56 â”‚   if where is True:                                                                      â”‚
â”‚ â±  57 â”‚   â”‚   return umr_any(a, axis, dtype, out, keepdims)                                      â”‚
â”‚    58 â”‚   return umr_any(a, axis, dtype, out, keepdims, where=where)                             â”‚
â”‚    59                                                                                            â”‚
â”‚    60 def _all(a, axis=None, dtype=None, out=None, keepdims=False, *, where=True):               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
UFuncTypeError: ufunc 'logical_or' did not contain a loop with signature matching types (None, &lt;class 'numpy.dtype[str_]'&gt;) -&gt; None

sandbox NO VCS  via 3.8.11(sandbox) ipython

â¯ if all(arr):
...:     print(&quot;foo&quot;)
foo

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ if any(arr):
...:     print(&quot;foo&quot;)
foo
</code></pre>
<p>Let's change the example to just use integers and see what happens:</p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ arr2 = np.array([1, True, False])

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ arr2
array([1, 1, 0])

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ if arr2.any():
...:     print(&quot;foo&quot;)
foo

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ if arr2.all():
...:     print(&quot;foo&quot;)

</code></pre>
<p>Ah, now some sanity...
First, the booleans are stored as integers, which based on this discussion makes sense.
Next we check if <code>any</code> values (this is a bitwise operation) are <code>True</code>, which we see they are so the conditional evaluates to <code>True</code>.
Howver, if we check that <code>all</code> values are <code>True</code> we see they aren't, the last value is <code>False</code> or <code>0</code> so the conditional fails.</p>
<p>This is a different way to evaluate logical conditions than with lists and it's because of the special nature of numpy arrays that allows them to be compared bitwise but on the flip side, there isn't a meaningful way to evaluate the <code>truth value</code> of an array.</p>
<h2><a href="#pandas" aria-hidden="true" class="anchor" id="pandas"></a>Pandas</h2>
<p>Now for <code>pandas</code>, which under the hood is a lot of <code>numpy</code> but not fully.
<code>pandas.Series</code> objects can hold mixed data types like lists, however to logically evaluate truth values we have to treat them like numpy arrays.</p>
<pre><code class="language-python">
sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ s = pd.Series([1, &quot;foo&quot;, True, False])

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ s

0        1
1      foo
2     True
3    False
dtype: object

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ bool(s)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ &lt;ipython-input-60-68e48e81da14&gt;:1 in &lt;cell line: 1&gt;                                              â”‚
â”‚ /home/u_paynen3/personal/sandbox/.venv/sandbox/lib/python3.8/site-packages/pandas/core/generic.p â”‚
â”‚ y:1527 in __nonzero__                                                                            â”‚
â”‚                                                                                                  â”‚
â”‚    1524 â”‚                                                                                        â”‚
â”‚    1525 â”‚   @final                                                                               â”‚
â”‚    1526 â”‚   def __nonzero__(self):                                                               â”‚
â”‚ â±  1527 â”‚   â”‚   raise ValueError(                                                                â”‚
â”‚    1528 â”‚   â”‚   â”‚   f&quot;The truth value of a {type(self).__name__} is ambiguous. &quot;                 â”‚
â”‚    1529 â”‚   â”‚   â”‚   &quot;Use a.empty, a.bool(), a.item(), a.any() or a.all().&quot;                       â”‚
â”‚    1530 â”‚   â”‚   )                                                                                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().

</code></pre>
<p>Just like with numpy, we can't evaluate the truth value of the series in a meaningful way, but bitwise operations make perfect sense...</p>
<pre><code class="language-python">
â¯ if s.any():
...:     print(&quot;foo&quot;)
foo

sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ if s.all():
...:     print(&quot;foo&quot;)

</code></pre>
<p><u>I thought this was about <code>and</code> and <code>&amp;</code>...</u></p>
<p>Right, so recall that <code>and</code> is a lazy boolean evaluation (ie. it evaluates the 'truth value' an object) whereas <code>&amp;</code> does bitwise comparison.</p>
<p>What we see then with <code>pandas</code> and <code>numpy</code> is that if we want to do logical comparisons, we need to do them bitwise, ie. use <code>&amp;</code>.</p>
<p>Keep in mind though that the data types make a big deal - we can't use <code>&amp;</code> with strings  because the bitwise operation isn't supported, for strings we need to use the boolean evaluation.</p>
<h2><a href="#the-original-point" aria-hidden="true" class="anchor" id="the-original-point"></a>The Original Point</h2>
<p>My main use case for this is finding elements in a dataframe/series based on 2 or more columns aligning row values...</p>
<p>Say I have a dataframe like this:</p>
<pre><code class="language-python">
sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ df

   s s2   s3
0  1  0  foo
1  1  a  bar
2  1  b  baz
3  2  a  fee
4  2  0   fi
</code></pre>
<p>Example use case is I want to get the values in <code>s3</code> where <code>s</code> is 1 and <code>s2</code> is 'a'. ie. I'm just after <code>bar</code> for now...</p>
<p>Up until now I've always just tried <code>df.s3[(df.s == 1) and (df.s2 == &quot;a&quot;)]</code> the first time and every single time I've gotten this error that I just haven't ever fully understood:</p>
<pre><code class="language-python">ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
</code></pre>
<p>But after this deep dive I think I've grasped that <code>and</code> doesn't actually do what I want here, and in order to do the bitwise comparision I need to use <code>&amp;</code></p>
<pre><code class="language-python">sandbox NO VCS  via 3.8.11(sandbox) ipython
â¯ df.s3[(df.s == 1) &amp; (df.s2 == &quot;a&quot;)]

1    bar
Name: s3, dtype: object
</code></pre>
<h2><a href="#end" aria-hidden="true" class="anchor" id="end"></a>End</h2>
<p>Hopefully this set of ramblings brings some clarity to <code>and</code> and <code>&amp;</code> and you can Google one less error in the future in your logical comparison workflows ğŸ˜„</p>
<!-- Content Injected to every content markdown footer -->
</div>
  
  <footer class="data-tags-footer">

    <div class="content-authors-flex">
      <div class="content-authors-full">
        
<div class="content-authors">
    <ul>
        
            
            
            <li>
                <a href="author-nicpayne.html">
                    <img src="https://github.com/pypeaday.png" alt="Nicholas Payne" class="avatar">
                    Nicholas Payne
                </a>
            </li>
            
        
    </ul>
</div>


      </div>

      <div class="date-tags-container">
        <div class="content-date">
          


<span class="content-date">
    <small> Apr  6, 2022 - &#10710; 14 min</small>
</span>

        </div>

        <ul class="content-tags">
          
          <li><a href="./tag-python.html">python</a></li>
          
          <li><a href="./tag-tech.html">tech</a></li>
          
        </ul>
      </div>
    </div>
  </footer>
  
</article>




  
  
  
  
  <article>
    Related python content
    <ul>
      
      
      <li><a href="./switching-from-altacv-to-rendercv-for-my-resume.html">Switching from AltaCV to RenderCV for my Resume</a></li>
      
      
      <li><a href="./switching-from-altacv-to-rendercv-for-my-resume.html">Switching from AltaCV to RenderCV for my Resume</a></li>
      
      
      <li><a href="./modal-labs.html">Modal Labs</a></li>
      
      
      <li><a href="./call-basicconfig-to-get-python-log-messages-in-ipython.html">Call basicConfig to get Python log messages in iPython</a></li>
      
      
      <li><a href="./benchmark-your-disks-with-fio.html">Benchmark your disks with fio</a></li>
      
    </ul>
  </article>
  



    <article></article>



        </section>
        
        <footer class="footer-content grid">
            <div>Powered by <a href="https://github.com/rochacbruno/marmite">Marmite</a> | <small><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY_NC-SA</a></small></div>
            
        </footer>
        
    </main>

    <script src="./static/marmite.js"></script>
    <script src="./static/custom.js"></script>
    
    <script type="module" src="./static/search.js"></script>
    
    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js"></script>
<script>
  hljs.highlightAll();
</script>



</body>
</html>
